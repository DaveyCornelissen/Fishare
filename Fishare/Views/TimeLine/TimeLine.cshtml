@using Fishare.Cookies
@using Fishare.Model
@model TimeLineViewModel

<link href="~/css/Timeline/Timeline.css" rel="stylesheet"/>
<div class="col-md-10 offset-1">
    <div class="col-md-8 offset-2">
        @foreach (Post post in Model.Posts)
        {
            <div class="col-md-12 PostContent border border-primary">
                <div class="col-md-12">
                    <div class="row PostTitle">
                        <div class="col-md-2">
                            @if (String.IsNullOrEmpty(post.UserProfileImage))
                            {
                                <img src="~/images/Layout/user.png" class="PostUserImage"/>
                            }
                            else
                            {
                                <img src="~/images/Uploads/ProfileImages/@post.UserProfileImage" class="PostUserImage rounded-circle border border-info"/>
                            }
                            
                        </div>
                        <div class="col-md-8"><h5 class="text-left">@post.UserName</h5></div>
                    </div>
                </div>
                <div class="PostImage">
                    <div id="@post.PostID" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                            @for (int i = 1; i <= post.Photos.Count; i++)
                            {
                                if (i == 0)
                                {
                                    <li data-target="#@post.PostID" data-slide-to="@i.ToString()" class="active"></li>
                                }
                                else
                                {
                                    <li data-target="#@post.PostID" data-slide-to="@i.ToString()"></li>
                                }
                            }
                        </ol>
                        <div class="carousel-inner">
                            @{int I = 0;}
                            @foreach (var image in post.Photos)
                            {
                                I++;
                                var active = I == 1 ? "active" : "";
                                <div class="carousel-item @active">
                                    <img class="d-block w-100 rounded" src="~/images/Uploads/PostImages/@image.Path">
                                </div>
                            }
                        </div>
                        
                        @if (post.Photos.Count > 1)
                        {
                            <a class="carousel-control-prev" href="#@post.PostID" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="carousel-control-next" href="#@post.PostID" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        }
                        
                    </div>
                </div>
                <div class="PostInfo col-md-12 border border-primary">
                    <div class="row">
                        <div class="PostDescription col-md-8">
                                <div class="col-md-12 row">
                                    <h5><strong class="text-primary">Title: </strong></h5><p> @post.Title</p>
                                </div>
                                <div class="col-md-12 row">
                                    <h5><strong class="text-primary">Description: </strong>  @post.Description</h5> 
                                </div>
                        </div>
                        <div class="PostAction col-md-4">
                            <div class="col-md-6">
                                <h5><strong class="text-primary">Likes: </strong> @post.PostLike</h5>
                            </div>
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-6">
                                        <button class="btn btn-success btn-sm" type="button" value="@post.PostID">Like</button>
                                    </div>
                                    <div class="col-md-6">
                                        <button class="btn btn-info btn-sm" type="button">Comments</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    @if (post.FishInfo != null)
                    {
                        <div class="PostFishInfo col-md-12">
                            <div class="row">
                                <div class="col-md-6">
                                    <P>Location: @post.Location</P>
                                    <P>Date/Time: @post.DateTime</P>
                                    <P>Fish: @post.FishInfo.Name</P>
                                </div>
                                <div class="col-md-6">
                                    <P>Lenght: @post.FishInfo.Lenght</P>
                                    <P>Weight: @post.FishInfo.Weight</P>
                                    <P>Bait: @post.FishInfo.Bait</P>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        }
    </div>
</div>

